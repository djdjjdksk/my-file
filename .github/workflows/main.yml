name: Download & Upload Kali Tools

on:
  workflow_dispatch:  # يسمح بتشغيله يدويًا من GitHub
  push:
    branches:
      - main  # يعمل عند التحديث على الفرع الرئيسي

jobs:
  download-and-upload:
    runs-on: ubuntu-latest

    steps:
      - name: 🔹 التحقق من الكود
        uses: actions/checkout@v3

      - name: 🔹 تثبيت Kali Linux Core داخل بيئة Ubuntu
        run: |
          sudo apt update
          sudo apt install -y kali-linux-core

      - name: 🔹 إنشاء مجلد لحفظ الأدوات
        run: mkdir -p kali-tools

      - name: 🔹 تنزيل جميع الأدوات المطلوبة
        run: |
          cd kali-tools
          apt download bash coreutils gawk grep sed git wget curl nano vim \
          net-tools procps iproute2 iputils-ping dnsutils \
          aircrack-ng macchanger ethtool iw reaver bully pixiewps hostapd dnsmasq lighttpd php-cgi \
          xterm tmux screen terminator hashcat john nmap ettercap-common ettercap-graphical tcpdump wireshark \
          rfkill usbutils pciutils python3 python3-pip python3-venv \
          netcat socat hydra medusa nikto gobuster dirb sqlmap \
          metasploit-framework exploitdb \
          responder beef-xss seclists wordlists \
          openvpn tor proxychains4 \
          radare2 gdb strace ltrace \
          apktool dex2jar jadx \
          zsh fish htop neofetch figlet lolcat \
          bettercap wifite kismet ferret dsniff urlsnarf driftnet \
          fluxion linset wifiphisher airgeddon \
          wavemon tshark mac-robber unhide

      - name: 🔹 ضغط الملفات لتسهيل رفعها
        run: |
          tar -czvf kali-tools.tar.gz kali-tools

      - name: 🔹 رفع الملفات إلى GitHub Releases
        uses: softprops/action-gh-release@v1
        with:
          files: kali-tools.tar.gz
          token: ${{ secrets.GITHUB_TOKEN }}
